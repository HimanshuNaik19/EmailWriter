# EmailWriter

EmailWriter is a Spring Boot 3 service that turns raw email content into polished replies by delegating the heavy lifting to Googles Gemini Generative Language API. The service exposes a single REST endpoint, making it easy to plug into custom front ends (see the `/email-writer-react` companion app) or automation pipelines.

## Features

- **Tone-aware replies**: Supply the original message and an optional tone (`formal`, `friendly`, etc.) and receive a model-generated response.
- **Gemini integration**: Uses the `gemini-2.5-flash` model via the official Generative Language REST API.
- **Reactive HTTP client**: Builds requests with Spring WebFluxs `WebClient` for non-blocking IO.
- **CORS-enabled controller**: The `/api/email/generate` endpoint is accessible from browser-based clients by default.

## Tech Stack

| Category      | Technology                         |
|---------------|-------------------------------------|
| Language      | Java 21                             |
| Framework     | Spring Boot 3.3 (Web + WebFlux)     |
| Build Tool    | Maven                               |
| HTTP Client   | Spring WebClient                    |
| Utilities     | Lombok                              |

## Prerequisites

1. Java 21 (Temurin, Oracle, or any compatible distribution)
2. Maven 3.9+
3. A Google AI Studio project with access to Gemini models

## Configuration

The service relies on two properties:

```properties
# src/main/resources/application.properties
gemini.api.url=https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent
gemini.api.key=<YOUR_GEMINI_KEY>
```

> **Security tip:** Never commit real API keys. Prefer externalized configuration via environment variables or a secrets manager. With Spring Boot you can override properties at runtime, e.g. `-Dgemini.api.key=...` or `GEMINI_API_KEY=...`.

## Running the Service

```bash
# From the repository root
mvn spring-boot:run
```

The application listens on `http://localhost:8080` by default.

## API Usage

`POST /api/email/generate`

### Request body

```json
{
  "emailContent": "Hey team, can we push the deadline?",
  "tone": "professional"
}
```

### Sample curl command

```bash
curl -X POST http://localhost:8080/api/email/generate \
     -H "Content-Type: application/json" \
     -d '{
           "emailContent": "Please resend the deck when ready.",
           "tone": "friendly"
         }'
```

### Response

Plain-text email reply generated by Gemini. Error responses surface parsing issues or upstream API failures via the controller.

## Testing

```bash
mvn test
```

## Project Structure

```
EmailWriter/
├── src/main/java/com/himanshu/EmailWriter/
│   ├── EmailWriterApplication.java     # Spring Boot entry point
│   ├── EmailGeneratorController.java   # REST controller (/api/email)
│   ├── EmailGeneratorService.java      # Gemini integration + prompt building
│   └── EmailRequest.java               # DTO for request payload
├── src/main/resources/application.properties
├── email-writer-react/                 # Optional React front end (not required)
└── pom.xml
```

## Deployment Notes

1. Externalize sensitive properties.
2. Lock down CORS or add authentication before exposing publicly.
3. Monitor usage against Googles quota limits; wrap `WebClient` calls with retries/backoff if needed.

## Future Enhancements

1. Add validation for `EmailRequest` (e.g., Bean Validation annotations).
2. Provide structured response objects (status, message) instead of raw strings.
3. Support multiple models or provider backends via configuration.
4. Bundle Dockerfile and CI workflow for reproducible deployments.

---
Need help? Open an issue or extend the project to suit your workflow, then point your client at `http://localhost:8080/api/email/generate` and start writing better emails in seconds.
